<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="Content-Type" content="text/html" />
        <meta name="viewport" content="width=100, initial-scale=0.5">
        <!-- Icon start -->
        <link rel="icon" href="../images/icons/IconSheet.svg#browserlogo">
        <link rel="apple-touch-icon" href="../images/icons/IconSheet.svg#browserlogo">
        <link rel="shortcut icon" href="../images/icons/IconSheet.svg#browserlogo" />
        <link rel="mask-icon" href="../images/icons/IconSheet.svg#browserlogo" />
        <!-- Icon end -->
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script defer src="https://www.googletagmanager.com/gtag/js?id=G-2W1VXE5GSE"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-2W1VXE5GSE');
        </script>
        <!-- Google Analytics TAG END  ---------------------->
        <!-- NO JS Behavior START -->
        <noscript>
            <style>
                nav {display:none;}
            </style>
        </noscript>
         <!-- NO JS Behavior END -->
         
        <title>Jason Yang - Quick Next</title>
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
    </head>

    <body>
        <!-- Side navigation start -->
        <nav class="sidenav">
            <li class="logo">
                <a href="#" class="nav-link">
                    <span class="link-text logo-text">Jason</span>
                    <svg><use href="../images/icons/IconSheet.svg#sidebardod"></use></svg>
                </a>
            </li>
        
            
            <li class="nav-item">
                <a href="../tags/mathcs.html" class="nav-link">
                    <svg><use href="../images/icons/IconSheet.svg#lambda"></use></svg>
                    <span class="link-text">Math/CS</span>
                </a>
            </li>
                
            <li class="nav-item">
                <a href="../tags/prog.html" class="nav-link">
                    <svg><use href="../images/icons/IconSheet.svg#progcode"></use></svg>
                    <span class="link-text">Prog</span>
                </a>
            </li>


            <li class="nav-item">
                <a href="../tags/AI.html" class="nav-link">
                    <svg><use href="../images/icons/IconSheet.svg#AIbrain"></use></svg>
                    <span class="link-text">ML/AI</span>
                </a>
            </li>

            <li class="nav-item">
                <a href="../tags/tech.html" class="nav-link">
                    <svg><use href="../images/icons/IconSheet.svg#hardware"></use></svg>
                    <span class="link-text">Tech</span>
                </a>
            </li>

            <li class="nav-item">
                <a href="../tags/musings.html" class="nav-link">
                    <svg><use href="../images/icons/IconSheet.svg#thinker"></use></svg>
                    <span class="link-text">Musings</span>
                </a>
            </li>


            <li class="nav-item">
                <a href="#" class="nav-link">
                    <svg><use href="../images/icons/IconSheet.svg#react"></use></svg>
                    <span class="link-text">React</span>
                </a>
            </li>
        </nav>
        <!-- Side navigation end -->
        <div id="header">
            <div id="logo">
                <a href="../">Jason Yang</a>
            </div>
            <div id="navigation">
                <a href="../">Home</a>
                <a href="../about.html">About</a>
                <a href="../contact.html">Contact</a>
                <a href="../archive.html">Archive</a>
            </div>
        </div>

        <div id="content">
            <h1>Quick Next</h1>
            

            <div class="info">
    Posted on March 20, 2021
    
</div>
<div class="info">
    
    Tags: <a title="All pages tagged 'prog'." href="../tags/prog.html">prog</a>, <a title="All pages tagged 'QuickCode'." href="../tags/QuickCode.html">QuickCode</a>, <a title="All pages tagged 'cloud'." href="../tags/cloud.html">cloud</a>, <a title="All pages tagged 'frontend'." href="../tags/frontend.html">frontend</a>
    
</div>
<div id="TOC"><ul>
<li><a href="#document"><span class="toc-section-number">1</span> _document</a></li>
<li><a href="#app"><span class="toc-section-number">2</span> _app</a></li>
<li><a href="#file-structure-determines-routing"><span class="toc-section-number">3</span> File structure determines routing</a></li>
<li><a href="#capturing-the-carid-and-modelid-as-variables"><span class="toc-section-number">4</span> Capturing the [carID] and [modelID] as variables</a></li>
<li><a href="#serverside-render"><span class="toc-section-number">5</span> ServerSide Render</a>
<ul>
<li><a href="#getstaticprops---ssg"><span class="toc-section-number">5.1</span> getStaticProps - SSG</a>
<ul>
<li><a href="#types-of-ssg"><span class="toc-section-number">5.1.1</span> 2 types of SSG</a></li>
<li><a href="#why-ssg-can-be-bad"><span class="toc-section-number">5.1.2</span> Why SSG can be bad?</a></li>
</ul></li>
<li><a href="#solution-to-stale-ssg---isr"><span class="toc-section-number">5.2</span> Solution to Stale SSG - ISR</a></li>
</ul></li>
<li><a href="#self-is-not-defined"><span class="toc-section-number">6</span> Self is Not Defined</a></li>
</ul></div>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource bash numberLines"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1"></a><span class="ex">npx</span> create-next-app@latest <span class="at">--ts</span></span>
<span id="cb1-2"><a href="#cb1-2"></a></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="ex">npm</span> install prettier <span class="at">--save-dev</span></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="ex">npm</span> install eslint-config-prettier <span class="at">--save-dev</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="ex">npm</span> install @emotion/babel-plugin <span class="at">--save-dev</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="ex">npm</span> install @emotion/eslint-plugin <span class="at">--save-dev</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="ex">npm</span> install @typescript-eslint/parser <span class="at">--save-dev</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="ex">npm</span> install @typescript-eslint/eslint-plugin <span class="at">--save-dev</span></span>
<span id="cb1-9"><a href="#cb1-9"></a></span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="co">#Dependencies for MUI</span></span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="ex">npm</span> install @emotion/react</span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="ex">npm</span> install @emotion/styled</span>
<span id="cb1-13"><a href="#cb1-13"></a></span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="co">#MUI</span></span>
<span id="cb1-15"><a href="#cb1-15"></a><span class="ex">npm</span> install @mui/material</span>
<span id="cb1-16"><a href="#cb1-16"></a><span class="ex">npm</span> install @mui/icons-material</span>
<span id="cb1-17"><a href="#cb1-17"></a></span>
<span id="cb1-18"><a href="#cb1-18"></a><span class="co">#SSR MUI+emotion components</span></span>
<span id="cb1-19"><a href="#cb1-19"></a><span class="ex">npm</span> install @emotion/server</span>
<span id="cb1-20"><a href="#cb1-20"></a></span>
<span id="cb1-21"><a href="#cb1-21"></a><span class="co">#auth</span></span>
<span id="cb1-22"><a href="#cb1-22"></a><span class="ex">npm</span> install <span class="at">--save</span> next-auth</span></code></pre></div>
<div class="sourceCode" id="cb2" data-filename=".eslintrc.json"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;env&quot;</span><span class="fu">:{</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;browser&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;es2021&quot;</span><span class="fu">:</span> <span class="kw">true</span><span class="fu">,</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;node&quot;</span><span class="fu">:</span><span class="kw">true</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;parser&quot;</span><span class="fu">:</span><span class="st">&quot;@typescript-eslint/parser&quot;</span><span class="fu">,</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;parserOptions&quot;</span><span class="fu">:{</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;emcaVersion&quot;</span><span class="fu">:</span><span class="dv">2020</span><span class="fu">,</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;sourceType&quot;</span><span class="fu">:</span><span class="st">&quot;module&quot;</span><span class="fu">,</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;emcaFeatures&quot;</span><span class="fu">:{</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;jsx&quot;</span><span class="fu">:</span><span class="kw">true</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">},</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;project&quot;</span><span class="fu">:</span><span class="st">&quot;./tsconfig.json&quot;</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;extends&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;next/core-web-vitals&quot;</span><span class="ot">,</span><span class="st">&quot;plugin:@typescript-eslint/recommended&quot;</span><span class="ot">,</span><span class="st">&quot;prettier&quot;</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;plugins&quot;</span> <span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;@emotion&quot;</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;rules&quot;</span> <span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;@emotion/jsx-import&quot;</span> <span class="fu">:</span> <span class="st">&quot;error&quot;</span><span class="fu">,</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;@emotion/no-vanilla&quot;</span> <span class="fu">:</span> <span class="st">&quot;error&quot;</span><span class="fu">,</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;@emotion/import-from-emotion&quot;</span> <span class="fu">:</span> <span class="st">&quot;error&quot;</span><span class="fu">,</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;@emotion/styled-import&quot;</span><span class="fu">:</span> <span class="st">&quot;error&quot;</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;settings&quot;</span><span class="fu">:{</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;react&quot;</span><span class="fu">:{</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>      <span class="dt">&quot;version&quot;</span><span class="fu">:</span><span class="st">&quot;detect&quot;</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">}</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">}</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb3" data-filename=".babelrc"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;presets&quot;</span> <span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;next/babel&quot;</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;plugins&quot;</span> <span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;@emotion&quot;</span><span class="ot">]</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb4" data-filename="/lib/emotionCache.tsx"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> createCache from <span class="st">'@emotion/cache'</span><span class="op">;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>const createEmotionCache <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  return <span class="fu">createCache</span>({ key<span class="op">:</span> <span class="st">'css'</span> })<span class="op">;</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>export default createEmotionCache<span class="op">;</span></span></code></pre></div>
<div class="sourceCode" id="cb5" data-filename="/src/components/StyledButton.tsx"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> styled from <span class="st">'@emotion/styled'</span><span class="op">;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>interface IStyleProps{</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  backColor<span class="op">:</span> <span class="dt">string</span><span class="op">;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>} </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>const MyButton <span class="op">=</span> styled<span class="op">.</span><span class="at">button</span><span class="op">&lt;</span>IStyleProps<span class="op">&gt;</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="vs">  padding: 100px;</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="vs">  color: hotpink;</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="vs">  background-color: </span><span class="sc">${</span>(props) <span class="kw">=&gt;</span> props<span class="op">.</span><span class="at">backColor</span><span class="sc">}</span><span class="vs">;</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="vs">  &amp;:hover {</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="vs">    color: purple;</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="vs">   }</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span><span class="op">;</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>const StyledButton <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  return <span class="op">&lt;</span>MyButton backColor<span class="op">=</span><span class="st">&quot;green&quot;</span><span class="op">&gt;</span>hello<span class="op">&lt;/</span>MyButton<span class="op">&gt;</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>export default StyledButton<span class="op">;</span></span></code></pre></div>
<section id="document" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> _document</h1>
<p>taken from <a href="https://github.com/mui-org/material-ui/blob/master/examples/nextjs/pages/_document.js">Official Nextjs example</a></p>
</section>
<section id="app" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> _app</h1>
<p>taken from <a href="https://github.com/mui-org/material-ui/blob/master/examples/nextjs/pages/_app.js">Official Nextjs example</a></p>
</section>
<section id="file-structure-determines-routing" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> File structure determines routing</h1>
<p>Page filename in nextjs like “landingpage.js” must be lowercase letters<br />
React Component filename in nextjs must be Uppercase like “MyCustomButton”.</p>
<figure><img src="http://www.plantuml.com/plantuml/svg/~h40737461727473616c740a0a7b0a202020207b540a20202020202b202f0a20202020202b2b207372630a20202020202b2b2b20636f6d6d6f6e0a20202020202b2b2b2b20636f6d706f6e656e74730a20202020202b2b2b2b2b204578427574746f6e0a20202020202b2b2b2b2b2b204578427574746f6e2e7473780a20202020202b2b2b2b2b2b204578427574746f6e2e746573742e74730a20202020202b2b2b2b20686f6f6b730a20202020202b2b2b2b207574696c730a20202020202b2b2b206d6f64756c65730a20202020202b2b2b2070616765730a20202020202b2b2b2b206170690a20202020202b2b2b2b205b63617249445d0a20202020202b2b2b2b2b20696e6465782e7473780a20202020202b2b2b2b2b205b6d6f64656c49445d0a20202020202b2b2b2b2b2b20696e6465782e7473780a20202020202b2b2b2b205f6170702e7473780a20202020202b2b2b2b205f646f63756d656e742e7473780a20202020202b2b2b2b20696e6465782e7473780a20202020202b2b207374796c65730a20202020202b2b207075626c69630a20202020202b2b0a0a202020207d0a7d0a0a40656e6473616c74"></figure>
<p>Modules will</p>
<ul>
<li>.next</li>
<li>package.json</li>
<li>package-lock.json</li>
<li>node_modules</li>
<li>src
<ul>
<li>components
<ul>
<li>MyCustomButton</li>
</ul></li>
<li>pages
<ul>
<li>[shipID] :: folder =&gt; represents a route
<ul>
<li>index.tsx =&gt; https://mywebsite.com/[shipID]</li>
<li>[modelID].tsx =&gt; https://mywebsite.com/[shipID]/[modelID]</li>
</ul></li>
<li>landingpage.tsx =&gt; https://mywebsite.com/landingpage.html</li>
<li>index.tsx</li>
<li>_app.tsx :: layout_template</li>
<li>_document.tsx :: custom layout_template</li>
<li>api :: folder &lt;IGNORE, it’s for backend&gt;</li>
</ul></li>
</ul></li>
<li>styles</li>
<li>theme.tsx</li>
</ul>
</section>
<section id="capturing-the-carid-and-modelid-as-variables" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Capturing the [carID] and [modelID] as variables</h1>
<div class="sourceCode" id="cb6"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> router <span class="op">=</span> <span class="fu">useRouter</span>()</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> {carID<span class="op">,</span> modelID} <span class="op">=</span> router<span class="op">.</span><span class="fu">query</span>()</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="vs">`the car is {carID} and model {modelID}`</span>)</span></code></pre></div>
</section>
<section id="serverside-render" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> ServerSide Render</h1>
<section id="getstaticprops---ssg" class="level2" data-number="5.1">
<h2 data-number="5.1"><span class="header-section-number">5.1</span> getStaticProps - SSG</h2>
<ul>
<li>getStaticProps only runs serverside even though you may have written it on a clientside file like index.js</li>
<li>getStaticProps is only allowed in a page file, NOT in a component file.</li>
<li>getStaticProps only runs on build time, in dev mode we see it being rebuilt every request which may cause confusion.</li>
</ul>
<section id="types-of-ssg" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1"><span class="header-section-number">5.1.1</span> 2 types of SSG</h3>
<table>
<thead>
<tr class="header">
<th>getStaticProps()</th>
<th>getStaticPaths()</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>calls on build</td>
<td>calls on first request</td>
</tr>
</tbody>
</table>
</section>
<section id="why-ssg-can-be-bad" class="level3" data-number="5.1.2">
<h3 data-number="5.1.2"><span class="header-section-number">5.1.2</span> Why SSG can be bad?</h3>
<p>SSG at build time and SSG at first request both are affected by stale data.</p>
<ul>
<li>If db changes once, SSG at build time is already stale</li>
<li>If db changes more than once, SSG at first request becomes stale This means if more than one update in db we have to rebuild the ENTIRE site.</li>
</ul>
<hr />
</section>
</section>
<section id="solution-to-stale-ssg---isr" class="level2" data-number="5.2">
<h2 data-number="5.2"><span class="header-section-number">5.2</span> Solution to Stale SSG - ISR</h2>
<ul>
<li>Solution ISR which basically means the specific static page ONLY will be rebuilt,</li>
<li>If your clientside code auto refreshes every 10 sec, the data will be relatively current.</li>
</ul>
</section>
</section>
<section id="self-is-not-defined" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Self is Not Defined</h1>
<ul>
<li>When importing react Pixi</li>
</ul>
<p>Reason for error: Pixi library uses ‘self’ or ‘window’ which is only defined in the client side. NextJS does prerendering always on the serverside meaning it will run Pixi on the serverside where there is no ‘self’ or ‘window’.</p>
<p>Fix:</p>
<ol type="1">
<li><p>Use <code>import dynamic from 'next/dynamic';</code></p></li>
<li><p>Use useEffect because it only runs on client side</p></li>
</ol>
</section>

        </div>
        <div id="footer">
            <div class="flex-container" style="display:flex; justify-content: space-between;">
                <div>
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
                </div>
   
            <div xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"><a property="dct:title" rel="cc:attributionURL" href="https://userjy.github.io/">Jason's Blog</a> by <a rel="cc:attributionURL dct:creator" property="cc:attributionName" href="https://userjy.github.io/">Jason Yang</a> is licensed under <a href="http://creativecommons.org/licenses/by-nc-nd/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">CC BY-NC-ND 4.0<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1"><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nd.svg?ref=chooser-v1"></a></div>
  
            </div>
        </div>
        
    </body>
    <footer>
        <!-- CODE TAB START -->
        <script>
            //Structure:
            // Codeblock < Group/Grouplabel/subgrp < grouplabels < allblocks

            const AllBlocksPre = document.getElementsByClassName("sourceCode");
            const AllBlocks = [...AllBlocksPre]; //gets all codeblocks w/ and w/o group label

            const rawgrouplabels = AllBlocks.map((e)=>(e.getAttribute("data-group"))); //group label w/ repeats
            const grouplabelsPre = [...new Set(rawgrouplabels)]; //get set of unique group labels
            const grouplabels = grouplabelsPre.filter((a)=>a); //remove nulls

            const getCodeBlocks = (grouplabel) => {
                //return list of codeblocks associated to a single group label
                return AllBlocks.filter((codeblock)=>(codeblock.getAttribute("data-group") === grouplabel));
            }

            const showSingleCode = (codeblock,subgrp) => { 
                //make single codeblock visible
                codeblock.style.display="block";
                const nonChosen = subgrp.filter((e)=>(e!=codeblock));
                nonChosen.map((e)=>(e.style.display="none"));
            }

            const makeBtn = (codeblock,subgrp) => {
                //make button for a single codeblock
                const newbutton = document.createElement("button");
                newbutton.textContent=codeblock.getAttribute("data-glabel");
                newbutton.addEventListener('click', ()=>{
                    showSingleCode(codeblock,subgrp);
                });
                return newbutton;
            }

            const showAll = (subgrp) => {
                //make all codeblocks visible
            subgrp.map((e)=>(e.style.display="block"));
            }

            const buildCodeTab = (subgrp) => {
                const leader = subgrp[0]; //get the leader codeblock of a group of codeblock

                const btngrp =subgrp.map((e)=>(makeBtn(e,subgrp)));
                btngrp.map((e)=>{
                    leader.insertAdjacentElement('beforebegin',e);
                    });
                
                //make showAll button START
                const btnShowAll = document.createElement("button");
                btnShowAll.textContent = "All";
                btnShowAll.addEventListener('click',(e)=>(showAll(subgrp)));
                leader.insertAdjacentElement('beforebegin', btnShowAll);
                //make showAllbutton END
            }
            
            //below code is performing actual behavior, the above code are just functions
            grouplabels.map((grouplabel) => {
                const groupOfCodeblocks = getCodeBlocks(grouplabel);
                buildCodeTab(groupOfCodeblocks);
                showSingleCode(groupOfCodeblocks[0],groupOfCodeblocks) //default select the first block
            })
        </script>
        <!-- CODE TAB END ---->

        <!-- MATH JAX START -------------------------------------- -->
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
        </script>
        <!-- MATH JAX END ----------------------------------------- -->

        <!-- RAILROAD START -------------------------------------- -->
        <script type="module">
            import rr,* as rrClass from "/lib/railroad/railroad.js";
            Object.assign(window,rr)
            window.rrOptions = rrClass.Options;
            document.addEventListener('DOMContentLoaded',()=>{ReplaceDivWithSvg()},false)
            const ReplaceDivWithSvg = () =>  {
                for (const railroadelem of document.getElementsByClassName("rroad") ){
                railroadelem.innerHTML = eval(railroadelem.innerText.trim()+".toString()")
                }
            }
        </script>
        

        <link rel="stylesheet" href="../lib/railroad/railroad-diagrams.css">
        <!-- RAILROAD END ----------------------------------------- -->
    </footer>
</html>
